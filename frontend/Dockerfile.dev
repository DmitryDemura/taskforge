FROM node:20-alpine
WORKDIR /app

ENV CI=true \
    CHOKIDAR_USEPOLLING=true \
    HOST=0.0.0.0 \
    NUXT_HOST=0.0.0.0 \
    NUXT_PORT=3001 \
    NUXT_EXPERIMENTAL_OXC=false \
    DISABLE_OXC=true

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm install --no-fund --no-audit

# Copy source code
COPY . .

EXPOSE 3001

CMD ["npm", "run", "dev"]
